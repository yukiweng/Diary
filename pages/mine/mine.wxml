<view class="wrapper">
  <view class="header" wx:if="{{!isLogin}}">
    <text style="font-size:40px;">â˜º</text>
    <navigator url="/pages/login/login">ç‚¹å‡»ç™»å½•</navigator>
  </view>
  <view class="header" wx:else>
    <view class="avatar"><open-data type="userAvatarUrl" ></open-data></view>
    <open-data type="userNickName"></open-data>
    <button open-type="contact" class="contactButton">é—®é¢˜åé¦ˆ</button>
  </view>
  <view wx:if="{{!isLogin}}" class="tips">
    <text>ç‚¹å‡»ç™»å½•ï¼Œå¼€å¯ç»Ÿè®¡åŠŸèƒ½å§ï¼</text>
  </view>
  <view class="contentWrapper" wx:else>
    <view class="container" wx:if="{{count&&showCount}}">
      <canvas canvas-id="pieCanvas" class="canvas" bindtouchstart="touchHandler"></canvas>
    </view>
    <view wx:elif="{{!showCount}}" class="diaryWrapper">
      <text class="title" wx:if="{{feeling==='smile'}}">æœ€è¿‘ ğŸ˜Š çš„ä¸‰å¤©ï¼š</text>
      <text class="title" wx:elif="{{feeling==='normal'}}">æœ€è¿‘ ğŸ˜‘ çš„ä¸‰å¤©ï¼š</text>
      <text class="title" wx:elif="{{feeling==='cry'}}">æœ€è¿‘ ğŸ˜¢ çš„ä¸‰å¤©ï¼š</text> 
      <view wx:for="{{diaryList}}" wx:for-item="diary" wx:key="index" class="tab">
        <text class="date">{{diary.attributes.date}}</text>
        <text class="content">{{diary.attributes.content}}</text> 
      </view>
      <view class="buttonWrapper">
        <button class="typeButton" wx:if="{{feeling!=='smile'}}" data-x="smile" bindtap="fetchOtherDiary">ğŸ˜Š</button>
        <button class="typeButton" wx:if="{{feeling!=='normal'}}" data-x="normal" bindtap="fetchOtherDiary">ğŸ˜‘</button>
        <button class="typeButton" wx:if="{{feeling!=='cry'}}" data-x="cry" bindtap="fetchOtherDiary">ğŸ˜¢</button>
        <button class="typeButton" data-x="count" bindtap="toShowCount">ç»Ÿè®¡</button>
      </view>
    </view>
  </view>
</view>
